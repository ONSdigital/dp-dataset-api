swagger: "2.0"
info:
  description: "Used to find information about data published by the ONS.
  `Datasets` are published in unique `versions`, which are categorized by `edition`.
  Data in each version is broken down by `dimensions`, and a unique combination
  of dimension `options` in a version can be used to retrieve `observation` level data."
  version: "1.0.0"
  title: "Explore our data"
  license:
    name: "Open Government Licence v3.0"
    url: "http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
basePath: "/v1"
tags:
- name: "Public"
- name: "Private user"
- name: "Private"
schemes:
- "http"
parameters:
  dataset:
    name: dataset
    description: "A unique id for a dataset to filter on"
    in: query
    type: string
  dimension:
    name: dimension
    description: "A dimension from a dataset"
    in: path
    required: true
    type: string
  dimension_options:
    description: "The name of the dimension option and a single value; each option (dimension) and corresponding value (code) must exist against the version - e.g. `age=30` or one of the dimension options can be represented by a wildcard value `*` e.g. `geography=*`"
    name: "<dimension_options>"
    in: query
    required: true
    type: string
  patch_options:
    required: true
    name: patch
    schema:
      $ref: '#/definitions/PatchOptions'
    description: "A list of patch operations for a dimension option"
    in: body
  edition:
    name: edition
    description: "An edition of a dataset"
    in: path
    required: true
    type: string
  event:
    name: event
    description: "An event that occurs when importing a dataset"
    in: body
    schema:
      $ref: '#/definitions/Event'
  id:
    name: id
    description: "Id that represents a dataset"
    in: path
    required: true
    type: string
  import_tasks:
    name: import_tasks
    description: "A request body to update the state of an import task"
    in: body
    schema:
      $ref: '#/definitions/ImportTasks'
  inserted_observations:
    name: inserted_observations
    description: "A value to increment the inserted_observations within an instance"
    in: path
    required: true
    type: integer
  instance_id:
    name: instance_id
    description: "A unique id for an instance"
    in: path
    required: true
    type: string
  instance:
    name: instance
    description: "An instance related to an import job and dataset"
    in: body
    required: true
    schema:
      $ref: '#/definitions/Instance'
  new_dataset:
    name: dataset
    description: "A new dataset"
    in: body
    required: true
    schema:
     allOf:
        - type: object
          properties:
            type:  
              $ref: '#/definitions/Type'
        - $ref: "#/definitions/Dataset"
  new_edition:
    name: new_edition
    description: "A new edition of the dataset"
    in: body
    required: true
    schema:
      $ref: '#/definitions/Edition'
  new_version:
    name: new_version
    description: "A new version for an edition of a dataset"
    in: body
    required: true
    schema:
      $ref: '#/definitions/Version'
  node_id:
   name: node_id
   description: "An unique node id"
   in: path
   required: true
   type: string
  newInstance:
    name: instance
    description: "An instance related to an import job"
    in: body
    required: true
    schema:
      $ref: '#/definitions/NewInstance'
  option:
   name: option
   description: "A option to set within a type"
   in: path
   required: true
   type: string
  state:
    name: "state"
    description: "A comma separated list of state values to filter on (e.g. ‘completed,edition-confirmed’)"
    in: query
    type: string
  update_dataset:
    name: dataset
    description: "An update to a dataset"
    in: body
    required: true
    schema:
      $ref: "#/definitions/Dataset"
  update_dimension:
    name: dimension
    description: "A dimension object to update for a given instance"
    in: body
    required: true
    schema:
      $ref: '#/definitions/UpdateInstanceDimension'
  update_dimension_option_request:
    name: dimension_option
    description: "A dimension option from an instance"
    in: body
    schema:
      $ref: '#/definitions/UpdateDimensionOptionRequest'
  version:
    name: version
    description: "A version of a dataset"
    in: path
    required: true
    type: string
  version_update:
    name: version_update
    description: "Update to a version for an edition of a dataset"
    in: body
    required: true
    schema:
      $ref: '#/definitions/UpdateVersion'
  limit:
    name: limit
    description: "Maximum number of items that will be returned. A value of zero will return zero items. The default value is 20, and the maximum limit allowed is 1000"
    in: query
    required: false
    type: integer
  offset:
    name: offset
    description: "Starting index of the items array that will be returned. By default it is zero, meaning that the returned items will start from the beginning."
    in: query
    required: false
    type: integer
  ids:
    name: id
    description: "List of ids, as comma separated values and/or as multiple query parameters with the same key (e.g. 'id=op1,op2&id=op3'). It defines the IDs that we want to retrieve. If provided, it takes precedence over offset and limit."
    in: query
    required: false
    type: string
  if_match:
    name: If-Match
    required: false
    description: "Filter resource version, as returned by a previous ETag, to be validated; or '*' to skip the version check"
    in: header
    type: string
securityDefinitions:
  FlorenceAPIKey:
    name: florence-token
    description: "API key used to allow florence users to create and query the progress of importing a dataset"
    in: header
    type: apiKey
  InternalAPIKey:
    name: internal-token
    description: "API key used to allow only internal services to update the state of an import job"
    in: header
    type: apiKey
  DownloadServiceAPIKey:
    name: x-download-service-token
    description: "API key used to allow the download service to access public and private links to a download"
    in: header
    type: apiKey
paths:
  /datasets:
    get:
      tags:
      - "Public"
      summary: "Get a list of datasets"
      description: "Returns a list of all datasets provided by the ONS that can be filtered using the filter API"
      parameters: 
      - $ref: '#/parameters/limit'
      - $ref: '#/parameters/offset'
      produces:
      - "application/json"
      responses:
        200:
          description: "A json list containing datasets which have been published"
          schema:
            $ref: '#/definitions/Datasets'
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}:
    post:
      tags:
      - "Private user"
      summary: "Create a dataset"
      description: "Create a dataset provided by the ONS that can be filtered using the filter API"
      parameters:
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/new_dataset'
      produces:
      - "application/json"
      responses:
        201:
          description: "A json object containing a dataset which has been created"
          schema:
            $ref: '#/definitions/NewDatasetResponse'
        400:
          description: "Invalid request body"
        401:
          description: "Unauthorised to create/overwrite dataset"
        403:
          description: "Forbidden to overwrite dataset, already published"
        500:
          $ref: '#/responses/InternalError'
    get:
      tags:
      - "Public"
      summary: "Get a dataset"
      description: "The dataset contains all high level information, for additional details see editions or versions of a dataset. "
      parameters:
      - $ref: '#/parameters/id'
      responses:
        200:
          description: "A json object for a single Dataset"
          schema:
            $ref: '#/definitions/DatasetResponse'
        404:
          description: "No dataset was found using the id provided"
        500:
          $ref: '#/responses/InternalError'
    put:
      tags:
      - "Private user"
      summary: "Update a dataset"
      description: "Update the metadata for the next release of the dataset. The dataset contains all high level information, for additional details see editions or versions of a dataset."
      parameters:
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/update_dataset'
      responses:
        200:
          description: "A json object for a single Dataset"
        400:
          description: "Bad Request due to invalid json in the request body"
        401:
          description: "Unauthorised to update dataset"
        404:
          description: "No dataset was found using the id provided"
        500:
          $ref: '#/responses/InternalError'
    delete:
      tags:
      - "Private user"
      summary: "Delete a dataset"
      description: "Delete an existing dataset"
      parameters:
      - $ref: '#/parameters/id'
      responses:
        204:
          description: "The dataset was successfully deleted"
        401:
          description: "Unauthorised to delete the dataset"
        403:
          description: "Forbidden to delete dataset, already published"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions:
    get:
      tags:
      - "Public"
      summary: "Get a list of editions of a dataset"
      description: "Get a list of editions of a type of dataset"
      parameters:
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/limit'
      - $ref: '#/parameters/offset'
      responses:
        200:
          description: "A json list containing all editions for a dataset"
          schema:
            $ref: '#/definitions/Editions'
        400:
          description: "Invalid request, dataset id was incorrect"
        404:
          description: "No editions were found for the id provided"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}:
    get:
      tags:
      - "Public"
      summary: "Get an edition of a dataset"
      description: "The edition contains a link to all versions"
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      responses:
        200:
          description: "A json object containing an edition"
          schema:
            $ref: '#/definitions/Edition'
        400:
          description: "Invalid request, dataset id was incorrect"
        404:
          description: "No edition of a dataset was found using the id and edition provided"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions:
    get:
      tags:
      - "Public"
      summary: "Get a list of versions of an edition"
      description: "Get a list of all versions for an edition of a dataset"
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/limit'
      - $ref: '#/parameters/offset'
      responses:
        200:
          description: "A json list containing all versions for a set type of dataset and edition"
          schema:
            $ref: '#/definitions/Versions'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
        404:
          description: "No versions found using the id and edition provided"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions/{version}:
    put:
      tags:
      - "Private user"
      summary: "Update a version"
      description: "Update a version for an edition of a dataset, if the state is changed to associated or published, the parent documents(dataset and edition resources) will also be updated. A version can only be updated if the state is not published"
      parameters:
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/version'
      - $ref: '#/parameters/version_update'
      responses:
        201:
          description: "A json object containing a version"
          schema:
            $ref: '#/definitions/NewVersionResponse'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * invalid request body
              * dataset id was incorrect
              * edition was incorrect
        401:
          description: "Unauthorised to update version of dataset"
        403:
          description: "Forbidden to overwrite version of dataset, already published"
        404:
          description: "Version was not found for a dataset using the id and edition provided"
        500:
          $ref: '#/responses/InternalError'
    get:
      tags:
      - "Public"
      summary: "Get a version"
      description: "Get a specific version of an edition of a dataset"
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/version'
      responses:
        200:
          description: "A json object containing the edition and version of a dataset"
          schema:
            $ref: '#/definitions/Version'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
        404:
          description: "No version was found for an edition of a dataset using the id, edition and version provided"
        500:
          $ref: '#/responses/InternalError'
    delete:
      tags:
      - "Private"
      summary: "Delete a version"
      description: "detaches a version from a collection. Effectively a soft delete."
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/version'
      security:
            - InternalAPIKey: []
      responses:
        200:
          description: "A json object containing the edition and version of a dataset"
          schema:
            $ref: '#/definitions/Version'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
              * version state was incorrect
              * not the most recent unpublished version
        404:
          description: "No version was found for an edition of a dataset using the id, edition and version provided"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions/{version}/dimensions:
    get:
      tags:
      - "Public"
      summary: "Get a list of dimensions from a dataset"
      description: "Get all dimensions which are used in the dataset"
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/version'
      - $ref: '#/parameters/limit'
      - $ref: '#/parameters/offset'
      responses:
        200:
          description: "A json list of dimensions"
          schema:
            $ref: '#/definitions/Dimensions'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
              * version was incorrect
        404:
          description: "No dimensions found for version of an edition of a dataset using the id, edition and version provided"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions/{version}/dimensions/{dimension}/options:
    get:
      tags:
      - "Public"
      summary: "Get a list of options from a dimension"
      description: "Get a list of options which appear in this dimension and dataset. By default all options are returned, but a subset can be requested by providing offset and limit query parameters, or by providing the list of option IDs, only the IDs that are found will be returned."
      parameters:
      - $ref: '#/parameters/dimension'
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/version'
      - $ref: '#/parameters/limit'
      - $ref: '#/parameters/offset'
      - $ref: '#/parameters/ids'
      responses:
        200:
          description: "Json object containing all options for a dimension"
          schema:
            $ref: '#/definitions/DimensionOptions'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
              * version was incorrect
              * dimension was incorrect
              * query parameters incorrect offset provided
              * query parameters incorrect limit provided
        404:
          description: "No dimension options were found for dimension"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions/{version}/metadata:
    get:
      tags:
      - "Public"
      summary: "Get metadata for a version"
      description: "Get all metadata relevant to a version"
      parameters:
      - $ref: '#/parameters/edition'
      - $ref: '#/parameters/id'
      - $ref: '#/parameters/version'
      responses:
        200:
          description: "Json object containing all metadata for a version"
          schema:
            $ref: '#/definitions/Metadata'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
        404:
          description: "Version not found"
        500:
          $ref: '#/responses/InternalError'
  /datasets/{id}/editions/{edition}/versions/{version}/observations:
    get:
      tags:
      - "Public"
      summary: "Get specific observations"
      description: "Get observations from a version of the dataset. By providing
      a single option for each dimension, a single observation will be returned.
      A wildcard (*) can be provided for one dimension, to retrieve a list of
      observations."
      parameters:
        - $ref: '#/parameters/edition'
        - $ref: '#/parameters/id'
        - $ref: '#/parameters/version'
        - $ref: '#/parameters/dimension_options'
      responses:
        200:
          description: "Json object containing all metadata for a version"
          schema:
            $ref: '#/definitions/ObservationsEndpoint'
        400:
          description: |
            Invalid request, reasons can be one of the following:
              * query parameters missing expected dimensions
              * query parameters contain incorrect dimensions
              * too many query parameters are set to wildcard (*) value; only one query parameter can be equal to *
        404:
          description: |
            Resource not found, reasons can be one of the following:
              * dataset id was incorrect
              * edition was incorrect
              * version was incorrect
              * observations not found for selected query paramaters
        500:
          $ref: '#/responses/InternalError'
  /instances:
    get:
      tags:
      - "Private user"
      summary: "Get instances"
      description: "Get a list of instances which has been paged"
      parameters:
        - $ref: '#/parameters/state'
        - $ref: '#/parameters/dataset'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/offset'
      produces:
      - "application/json"
      security:
      - FlorenceAPIKey: []
      responses:
        200:
          description: "Return a list of instance state"
          schema:
            $ref: '#/definitions/Instances'
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        500:
          $ref: '#/responses/InternalError'
    post:
      tags:
      - "Private"
      summary: "Create an instance"
      description:  |
        Create an instance which will be imported. To create an instance an import job id and href is required. This is to allow a link back to the import job
      parameters:
      - $ref: '#/parameters/newInstance'
      produces:
      - "application/json"
      security:
      - InternalAPIKey: []
      responses:
        201:
          description: "Successfully created instance"
          schema:
            $ref: '#/definitions/NewInstance'
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}:
    get:
      tags:
      - "Private user"
      summary: "Get an instance"
      description: "Get the current state of an instance, this includes all events which have happened."
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json"
      security:
      - FlorenceAPIKey: []
      responses:
        200:
          description: "Return a single instance state"
          schema:
            $ref: '#/definitions/Instance'
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        401:
          $ref: '#/responses/UnauthorisedError'
        404:
          $ref: '#/responses/InstanceNotFound'
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
    put:
      tags:
      - "Private"
      summary: "Update an instance"
      description: "Update an instance by providing an unique id and a set of properties to over write"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/instance'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json"
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "The instance has been updated"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          $ref: '#/responses/InstanceNotFound'
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/dimensions:
    get:
      tags:
      - "Private user"
      summary: "Get a list of dimensions for an instance"
      description: "Get all dimensions from an instance"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json"
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "Return a list of dimensions"
          schema:
            type: array
            items:
              $ref: '#/definitions/DimensionOption'
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          $ref: '#/responses/InstanceNotFound'
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
    post:
      tags:
      - "Private"
      summary: "Create a dimension"
      description: "Create a new dimension which is related to an instance"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/update_dimension_option_request'
      - $ref: '#/parameters/if_match'
      security:
      - InternalAPIKey: []
      responses:
        201:
          description: "Dimension was created"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        404:
          $ref: '#/responses/InstanceNotFound'
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/dimensions/{dimension}:
    put:
      tags:
      - "Private user"
      summary: "Update dimension"
      description: "Update the label and/or description of a dimension within an instance, by providing dimension name and properties to over write"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/dimension'
      - $ref: '#/parameters/update_dimension'
      - $ref: '#/parameters/if_match'
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "The instance has been updated"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          $ref: '#/responses/InstanceNotFound'
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/dimensions/{dimension}/options:
    get:
      tags:
      - "Private user"
      summary: "Get a list of options for a dimension"
      description: "Get all unique options from a dimension"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/dimension'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json"
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "Return a list of unique options"
          schema:
            type: object
            properties:
              dimension:
                description: "The name of the dimension"
                type: string
              options:
                description: "A list of all unique options within a dimension"
                type: array
                items:
                  type: string
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          description: "dimension does not match any dimensions within the instance"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/events:
    post:
      tags:
       - "Private"
      summary: "Add an event to an instance"
      description: |
        Add a new event into an instance. Events can be for information or error messages.
        Each event must contain a type of event (Info or Error), a message to explain
        the event, time of the event and finally the message offset in kafka
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/event'
      - $ref: '#/parameters/if_match'
      security:
      - InternalAPIKey: []
      responses:
        201:
          description: "The event was added to the instance"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        404:
          description: "InstanceId does not match any instances"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/inserted_observations/{inserted_observations}:
    put:
      tags:
      - "Private"
      summary: "Increment the inserted observation count"
      description: "This will add to the number already store in the api"
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/inserted_observations'
      - $ref: '#/parameters/if_match'
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "Added value to inserted observation"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        404:
          description: "InstanceId does not match any instances"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/import_tasks:
    put:
      tags:
      - "Private"
      summary: "Update import tasks for an instance"
      description: "The instance import process involves multiple tasks. This endpoint updates the state of an import task."
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/import_tasks'
      - $ref: '#/parameters/if_match'
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "Updated the state of the import task"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        404:
          description: "InstanceId does not match any instances"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/dimensions/{dimension}/options/{option}:
    patch:
      tags:
      - "Private"
      summary: "Modify a dimension option for an instance"
      description: |
        Modify a dimension option for an instance by setting values for node_id or order
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/dimension'
      - $ref: '#/parameters/option'
      - $ref: '#/parameters/patch_options'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json-patch+json"
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "The dimension option was modified and the successfully applied patch operations are returned"
          schema:
            $ref: '#/definitions/PatchOptions'
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          description: "InstanceId does not match any instances"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
  /instances/{instance_id}/dimensions/{dimension}/options/{option}/node_id/{node_id}:
    put:
      deprecated: true
      tags:
      - "Private"
      summary: "Update a dimension with the node_id"
      description: |
        Update the dimension with a nodeId
      parameters:
      - $ref: '#/parameters/instance_id'
      - $ref: '#/parameters/dimension'
      - $ref: '#/parameters/node_id'
      - $ref: '#/parameters/option'
      - $ref: '#/parameters/if_match'
      produces:
      - "application/json"
      security:
      - InternalAPIKey: []
      responses:
        200:
          description: "Updated the dimension with the nodeId"
          headers:
            ETag:
              type: string
              description: "Defines a unique instance resource version"
        400:
          $ref: '#/responses/InvalidRequestError'
        401:
          $ref: '#/responses/UnauthorisedError'
        403:
          $ref: '#/responses/ForbiddenError'
        404:
          description: "InstanceId does not match any instances"
        409:
          $ref: '#/responses/ConflictError'
        500:
          $ref: '#/responses/InternalError'
responses:
  ConflictError:
    description: "Failed to process the request due to a conflict"
  ForbiddenError:
    description: "The request is forbidden"
  InstanceNotFound:
    description: "The instance was not found"
  InternalError:
    description: "Failed to process the request due to an internal error"
  InvalidRequestError:
    description: "Failed to process the request due to invalid request"
  UnauthorisedError:
    description: "The token provided is unauthorised to carry out this operation"
definitions:
  AccessRightsLink:
    type: object
    properties:
      href:
        description: "A url to the standard Government access right text for the dataset"
        type: string
  Alert:
    description: "Important information relating to a version of a dataset"
    type: object
    properties:
      date:
        description: "The date and time of when an alert took place"
        type: string
      description:
        description: "Detail of what a user needs to be aware of for this dataset"
        type: string
      type:
        description: "The type of alert"
        example: "correction"
        type: string
  Codelist:
    type: object
    properties:
      href:
        description: "A link to the codelist corresponding to this dimension"
        type: string
      id:
        description: "The codelist id corresponding to this dimension"
        type: string
      name:
        description: "The dimension name"
        type: string
      description:
        description: "The dimension description"
        type: string
      label:
        description: "A human readable label for dimension"
        type: string
  CollectionID:
    description: "The id of the unpublished collection (of datasets) that this dataset is associated with"
    type: string
  Contact:
    description: "A list of objects containing contact information for this dataset"
    type: object
    properties:
      email:
        description: "An email address to contact the statistician"
        type: string
      name:
        description: "The name of the statistician"
        type: string
      telephone:
        description: "Telephone number to contact the statistician"
        type: string
  Datasets:
    description: "A list of datasets"
    type: object
    properties:
      count:
        description: "The number of datasets returned"
        readOnly: true
        type: integer
      items:
        type: array
        items:
          $ref: '#/definitions/DatasetResponse'
      limit:
        description: "The number of datasets requested"
        type: integer
      offset:
        description: "The first row of datasets to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of datasets"
        readOnly: true
        type: integer
  DatasetResponse:
    description: "A model for the response body when getting a dataset"
    allOf:
    - type: object
      properties:
        id:
          description: "An unique id for a dataset"
          example: "DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC"
          readOnly: true
          type: string
        type:
          $ref: "#/definitions/Type"
    - $ref: "#/definitions/Dataset"
  Dataset:
    description: "The dataset"
    type: object
    properties:
      collection_id:
        $ref: '#/definitions/CollectionID'
      contacts:
        description: "A list containing contact details of staticians for a dataset"
        type: array
        items:
          $ref: '#/definitions/Contact'
      description:
        description: "A description for a dataset"
        type: string
      keywords:
        description: "A list of keywords for a dataset"
        type: array
        items:
          type: "string"
      license:
        description: "The standard Government license right text for the dataset"
        type: string
      links:
        $ref: '#/definitions/DatasetLinks'
      methodologies:
        description: "A list of methodologies for a dataset"
        type: array
        items:
          type: object
          properties:
            description:
              description: "The description of a methodology"
              type: string
            href:
              description: "The url to a methodology"
              type: string
            title:
              description: "The title of a methodology"
              type: string
      national_statistic:
        description: "The flag indicating the resource is a national statistic. These are certified as compliant with the Code of Practice for Official Statistics"
        type: boolean
      next_release:
        description: "The next release date for a dataset"
        type: string
      nomis_ref_url:
        description: "The NOMIS reference url for the dataset"
        type: string
        example: "https://www.nomisweb.co.uk/census/2011/ks106ew"
      publications:
        description: "A list of publications for a dataset"
        type: array
        items:
          type: object
          properties:
            description:
              description: "The description of a publication"
              type: string
            href:
              description: "The url to a publication"
              type: string
            title:
              description: "The title of a publication"
              type: string
      publisher:
        $ref: '#/definitions/Publisher'
      qmi:
        description: "Object containing information on the quality and methodology index of a dataset"
        type: object
        properties:
          description:
            description: "The description of a quality and methodology index"
            type: string
          href:
            description: "The url to a quality and methodology index"
            type: string
          title:
            description: "The title of a quality and methodology index"
            type: string
      related_datasets:
        description: "A list of objects containing information of datasets related to a dataset"
        type: array
        items:
          type: object
          properties:
            href:
              description: "The url to a related dataset"
              type: string
            title:
              description: "The title of a related dataset"
              type: string
      release_frequency:
        description: "The release frequency of a dataset"
        type: string
      state:
        $ref: '#/definitions/State'
      theme:
        description: "The theme for a dataset"
        type: string
      title:
        description: "The title of the dataset"
        example: "CPI"
        type: string
      unit_of_measure:
        description: "The unit of measure for the dataset observations"
        type: string
      uri:
        description: "The uri to the location of this resource on the web"
        type: string

  Type:
    description: "The type for a dataset" 
    type: string
    enum: [filterable, nomis]
    default: "filterable"    
  Dimension:
    description: "A single dimension within a dataset"
    type: object
    properties:
      description:
        description: ""
        type: string
      dimension:
        description: "The name of the dimension"
        type: string
      label:
        description: ""
        type: string
      links:
        type: object
        properties:
          code_list:
            description: "The code list related to this dimension"
            type: object
            properties:
              href:
                description: "A URL to the code list"
                type: string
              id:
                description: "The unique id for the code list"
                type: string
          options:
            $ref: '#/definitions/OptionsLink'
          version:
            $ref: '#/definitions/VersionLink'
  Dimensions:
    type: object
    properties:
      count:
        description: "The number of dimensions returned for a version from an edition of a dataset"
        readOnly: true
        type: integer
      items:
        description: "An array of dimensions"
        type: array
        items:
          $ref: '#/definitions/Dimension'
      limit:
        description: "The number of dimensions requested for a version from an edition of a dataset"
        type: integer
      offset:
        description: "The first row of dimension for a version from an edition of a dataset to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of dimensions against a version from an edition of a dataset"
        readOnly: true
        type: integer
  DimensionOptions:
    type: object
    properties:
      count:
        description: "The number of dimensions returned for a version from an edition of a dataset"
        readOnly: true
        type: integer
      items:
        description: "An array of dimension options"
        type: array
        items:
          $ref: '#/definitions/DimensionOption'
      limit:
        description: "The number of dimensions requested for a version from an edition of a dataset"
        type: integer
      offset:
        description: "The first row of dimension for a version from an edition of a dataset to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of dimensions against a version from an edition of a dataset"
        readOnly: true
        type: integer
  DimensionOption:
    type: object
    properties:
      dimension:
        description: "The name of the dimension"
        type: string
      instance_id:
        description: "The unique identifier for the instance in which this dimension option is associated to"
        type: string
      label:
        description: "A label given to a dimension option"
        type: string
      links:
        description: "A object with all resources related to a dimension option"
        type: object
        properties:
          code:
            description: "A link to the code of the dimension for this option"
            type: object
            properties:
              href:
                description: "The url of the code that refers to the dimension for this option"
                type: string
              id:
                description: "The id of the code that refers to the dimension for this option"
                type: string
          code_list:
            description: "A link to the code list the dimension for this option belongs to"
            type: object
            properties:
              href:
                description: "The url of the code list that the dimension for this option belongs to"
                type: string
              id:
                description: "The id of the code list that the dimension for this option belongs to"
                type: string
          version:
            description: "A link to the version of the dataset the option belongs to"
            readOnly: true
            type: object
            properties:
              href:
                description: "The href of the version that this option belongs to"
                type: string
              id:
                description: "The id of the version that this option belongs to"
                type: string
      node_id:
        description: "The id of the node"
        type: string
      option:
        description: "An option for a dimension"
        type: string
  PatchOptions:
    description: "A list of operations to patch a dimension option. Can only handle adding values for /node_id and /order. Each element in the array is processed in sequential order."
    type: array
    items:
      type: object
      description: "Item containing all necessary information to make a single operation on the resource."
      properties:
        op:
          description: |
            The operation to be made on path.
            * add - Sets the value for the provided path
          type: string
          enum: [add]
        path:
          description: "Path to value that needs to be operated on."
          type: string
          example: "/node_id"
          enum: [/node_id, /order]
        value:
          description: "A value that will be set for the provided path. /node_id accepts string values, and /order accepts integer values."
          example: "node_123"
  DownloadObject:
    description: "Object containing information of a downloadable file"
    type: object
    properties:
      href:
        description: "The URL to the generated file"
        type: string
      size:
        description: "The size of the file in bytes"
        type: string
  Edition:
    type: object
    properties:
      edition:
        description: "The edition of the dataset"
        example: "2017"
        readOnly: true
        type: string
      id:
        description: "An unique id for a dataset edition"
        readOnly: true
        type: string
      links:
        $ref: '#/definitions/EditionLinks'
      state:
        $ref: '#/definitions/State'
  Editions:
    type: object
    properties:
      count:
        description: "The number of editions returned for a dataset"
        readOnly: true
        type: integer
      items:
        type: array
        items:
          $ref: '#/definitions/Edition'
      limit:
        description: "The number of editions requested for a dataset"
        type: integer
      offset:
        description: "The first row of editions for a dataset to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of editions against a dataset"
        readOnly: true
        type: integer
  Event:
    type: object
    properties:
      message:
        description: "A description of the event"
        type: string
      message_offset:
        description: "The kafka message offset (Used to locate the kafka message)"
        type: string
      time:
        description: "The time of the event in ISO 8601 format"
        type: string
      type:
        description: |
          The type of event, this can be;
          * Info - for an information event
          * Error - for an error event
        type: string
  ImportTasks:
    type: object
    properties:
      build_hierarchies:
        type: array
        items:
          type: object
          properties:
            code_list_id:
              description: "The ID of the codelist that this hierarchy represents"
              type: string
            dimension_name:
              description: "The name of the dimension the hierarchy represents"
              type: string
            state:
              description: "The state of the import observations task"
              type: string
      build_search_indexes:
        type: array
        items:
          type: object
          properties:
            dimension_name:
              description: "The name of the dimension the search index represents"
              type: string
            state:
              description: "The state of the import observations task"
              type: string
      import_observations:
        type: object
        properties:
          state:
            description: "The state of the import observations task"
            type: string
          total_inserted_observations:
            description: "The number of inserted observations in this instance"
            type: integer
  Instance:
    type: object
    properties:
      alerts:
        description: "A list of alerts against an instance"
        readOnly: true
        type: array
        items:
          $ref: '#/definitions/Alert'
      id:
        description: "A unique id for an instance"
        readOnly: true
        type: string
      collection_id:
        $ref: '#/definitions/CollectionID'
      dimensions:
        description: "A list of codelists for each dimension of this instance"
        type: array
        items:
          $ref: '#/definitions/Codelist'
      downloads:
        description: "A selection of download objects containing information of downloadable files."
        type: object
        properties:
          csv:
            $ref: '#/definitions/DownloadObject'
          xls:
            $ref: '#/definitions/DownloadObject'
      edition:
        description: "The edition of the dataset version"
        type: string
      events:
        description: "A list of events took place for this job"
        readOnly: true
        type: array
        items:
          $ref: '#/definitions/Event'
      headers:
        description: "The header information from a V4 file"
        type: array
        items:
          type: string
      import_tasks:
        $ref: '#/definitions/ImportTasks'
      last_updated:
        description: "The last time an event happened"
        readOnly: true
        type: string
      links:
        type: object
        properties:
          dataset:
            description: "An object describing the ID and URL for a dataset which is associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for the dataset associated with this instance"
                example: "http://localhost:22000/datasets/95c4669b-3ae9-4ba7-b690-87e890a1c67c"
                type: string
              id:
                description: "The ID of the dataset associated with this instance"
                example: "95c4669b-3ae9-4ba7-b690-87e890a1c67c"
                type: string
          dimensions:
            description: "An object describing the URL for the dimensions which are associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for a list of dimensions associated with this instance"
                example: "http://localhost:22000/datasets/95c4669b-3ae9-4ba7-b690-87e890a1c67c/editions/2017/versions/1/dimensions"
                type: string
          edition:
            description: "An object describing the ID and URL for the dataset edition that is associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for the dataset edition associated with this instance"
                example: "http://localhost:22000/datasets/95c4669b-3ae9-4ba7-b690-87e890a1c67c/editions/2017"
                type: string
              id:
                description: "The ID for the dataset edition associated with this instance"
                type: string
          job:
            description: "An object describing the ID and URL of the job containing this instance"
            readOnly: true
            required: ["id", "href"]
            type: object
            properties:
              href:
                description: "The URL for the job containing this instance"
                example: "http://localhost:21800/jobs/042e216a-7822-4fa0-a3d6-e3f5248ffc35"
                type: string
              id:
                description: "The ID of the job containing this instance"
                example: 042e216a-7822-4fa0-a3d6-e3f5248ffc35
                type: string
          self:
            description: "An object describing the ID and URL for a dataset which is associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for this resource"
                example: "http://localhost:22000/instances/45c4669b-3ae9-4ba7-b690-87e890a1c67f"
                type: string
          spatial:
            description: "A link object describing the url to a list of geography ranges for the version of the dataset"
            type: object
            properties:
              href:
                description: "A url to a list of geography ranges for the version of the dataset"
                type: string
          version:
            description: "An object describing the ID and URL of the dataset version associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for the dataset version associated with this instance"
                example: 'http://localhost:21800/dataset/042e216a-7822-4fa0-a3d6-e3f5248ffc35/edition/2017/version/1'
                type: string
              id:
                description: "The ID of the dataset version associated with this instance"
                example: "042e216a-7822-4fa0-a3d6-e3f5248ffc35"
                type: string
      release_date:
        description: "The release date of this version of the dataset"
        type: string
      state:
        $ref: '#/definitions/State'
      temporal:
        $ref: '#/definitions/Temporal'
      total_observations:
        description: "The number of observations in this instance"
        type: integer
      version:
        description: "The dataset version number that this instance is associated with, this will only be set once the state has been updated to `edition-confirmed`"
        readOnly: true
        type: integer
  Instances:
    description: "A list of instance resources, if query parameter state is set return all instances with that state"
    type: object
    properties:
      count:
        description: "The number of instances returned"
        type: integer
      items:
        type: array
        items:
          $ref: '#/definitions/Instance'
      limit:
        description: "The number of instances requested"
        type: integer
      offset:
        description: "The first row of instances to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of instances"
        type: integer
  LatestChange:
    description: "A single change between this version and the previous version of an edition for a dataset"
    type: object
    properties:
      description:
        description: "A description of what has changed between versions"
        type: string
      name:
        description: "The name of the change that has occurred between versions"
        type: string
        example: "changes in classification"
      type:
        description: "The type of change"
        type: string
        example: "summary of changes"
  Metadata:
    description: "An object containing all metadata information against a version"
    type: object
    properties:
      alerts:
        description: "A list of alerts, for example corrections after the resource has been published"
        type: array
        items:
          $ref: '#/definitions/Alert'
      contacts:
        description: "A list containing contact details of staticians for a dataset"
        type: array
        items:
          $ref: '#/definitions/Contact'
      description:
        description: "A description for a dataset"
        type: string
      dimensions:
        description: "A list of codelists for each dimension of this version"
        type: array
        items:
          $ref: '#/definitions/Codelist'
      distribution:
        description: "A list of media types that the version data of an edition of a dataset can be accessed"
        type: array
        items:
          type: string
      downloads:
        description: "A selection of download objects containing information of downloadable files."
        type: object
        properties:
          csv:
            $ref: '#/definitions/DownloadObject'
          xls:
            $ref: '#/definitions/DownloadObject'
      keywords:
        description: "A list of keywords for a dataset"
        type: array
        items:
          type: "string"
      latest_changes:
        description: "A list of changes between version of an edition for a dataset and the previous version of the same dataset edition"
        type: array
        items:
          $ref: '#/definitions/LatestChange'
      license:
        description: "The standard Government license right text for the dataset"
        type: string
      links:
        $ref: '#/definitions/MetadataLinks'
      methodologies:
        description: "A list of methodologies for a dataset"
        type: array
        items:
          type: object
          properties:
            description:
              description: "The description of a methodology"
              type: string
            href:
              description: "The url to a methodology"
              type: string
            title:
              description: "The title of a methodology"
              type: string
      national_statistic:
        description: "The flag indicating the resource is a national statistic. These are certified as compliant with the Code of Practice for Official Statistics"
        type: boolean
      next_release:
        description: "The next release date for a dataset"
        type: string
      publications:
        description: "A list of publications for a dataset"
        type: array
        items:
          type: object
          properties:
            description:
              description: "The description of a publication"
              type: string
            href:
              description: "The url to a publication"
              type: string
            title:
              description: "The title of a publication"
              type: string
      publisher:
        $ref: '#/definitions/Publisher'
      qmi:
        description: "Object containing information on the quality and methodology index of a dataset"
        type: object
        properties:
          description:
            description: "The description of a quality and methodology index"
            type: string
          href:
            description: "The url to a quality and methodology index"
            type: string
          title:
            description: "The title of a quality and methodology index"
            type: string
      related_datasets:
        description: "A list of objects containing information of datasets related to a dataset"
        type: array
        items:
          type: object
          properties:
            href:
              description: "The url to a related dataset"
              type: string
            title:
              description: "The title of a related dataset"
              type: string
      release_date:
        description: "The release date of this version of the dataset"
        type: string
      release_frequency:
        description: "The release frequency of a dataset"
        type: string
      temporal:
        $ref: '#/definitions/Temporal'
      theme:
        description: "The theme for a dataset"
        type: string
      title:
        description: "The title of the dataset"
        example: "CPI"
        type: string
      unit_of_measure:
        description: "The unit of measure for the dataset observations"
        type: string
      uri:
        description: "The uri to the location of the dataset on the web"
        type: string
      usage_notes:
        $ref: '#/definitions/UsageNotes'
  NewDatasetResponse:
    description: "A model for the response body when creating a new dataset"
    type: object
    properties:
      id:
        description: "An unique id for a dataset"
        example: "DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC"
        type: string
      current:
        allOf:
        - type: object
          properties:
            collection_id:
              $ref: '#/definitions/CollectionID'
            type:  
              $ref: '#/definitions/Type'
        - $ref: "#/definitions/Dataset"
      next:
        allOf:
        - type: object
          properties:
            collection_id:
              $ref: '#/definitions/CollectionID'
            type:  
              $ref: '#/definitions/Type'
        - $ref: "#/definitions/Dataset"
  NewInstance:
    description: "A model for the request and response body for creating a new instance"
    type: object
    properties:
      dimensions:
        description: "A list of codelists for each dimension of this instance"
        type: array
        items:
          $ref: '#/definitions/Codelist'
      id:
        description: "A unique id for an instance"
        readOnly: true
        type: string
      import_tasks:
        $ref: '#/definitions/ImportTasks'
      links:
        type: object
        properties:
          dataset:
            description: "An object describing the ID and URL for a dataset which is associated with this instance"
            type: object
            properties:
              href:
                description: "The URL for the dataset associated with this instance"
                example: "http://localhost:22000/datasets/95c4669b-3ae9-4ba7-b690-87e890a1c67c"
                type: string
              id:
                description: "The ID of the dataset associated with this instance"
                example: "95c4669b-3ae9-4ba7-b690-87e890a1c67c"
                type: string
          job:
            description: "An object describing the ID and URL of the job containing this instance"
            required: ["id", "href"]
            type: object
            properties:
              href:
                description: "The URL for the job containing this instance"
                example: "http://localhost:21800/jobs/042e216a-7822-4fa0-a3d6-e3f5248ffc35"
                type: string
              id:
                description: "The ID of the job containing this instance"
                example: 042e216a-7822-4fa0-a3d6-e3f5248ffc35
                type: string
          self:
            description: "An object describing the ID and URL for a dataset which is associated with this instance"
            readOnly: true
            type: object
            properties:
              href:
                description: "The URL for this resource"
                example: "http://localhost:22000/instances/45c4669b-3ae9-4ba7-b690-87e890a1c67f"
                type: string
      state:
        description: "The state of the resource, this can only have a value of `created`"
        type: string
        readOnly: true
  NewVersionResponse:
    description: "A model for the response body when creating a new version for an edition of a dataset"
    allOf:
      - type: object
        properties:
          collection_id:
            $ref: '#/definitions/CollectionID'
          id:
            type: string
            description: "An unique id for a dataset"
            example: "DE3BC0B6-D6C4-4E20-917E-95D7EA8C91CD"
      - $ref: "#/definitions/Version"
  ObservationsEndpoint:
    description: "An object containing information on a list of observations for a given version of a dataset"
    type: object
    properties:
      dimensions:
        description: "A list of dimensions for the given query"
        type: object
        properties:
          <dimension name>:
            description: "Each field is a dimension (<dimension name>) and will represent a query parameter in the request unless the query parameter is equal to a wildcard value (*)"
            type: object
            properties:
              option:
                description: "A list of links to the corresponding dimension codes for the given `dimension_options`"
                type: object
                properties:
                  href:
                    description: "A link to the corresponding dimension code for the given `dimension_option`"
                    type: string
                    example: "http://localhost:8080/codelists/AB12CD34/codes/K02000001"
                  id:
                    description: "The id of the corresponding dimension code for the given `dimension_option`"
                    type: string
      limit:
        description: "The maximum number of observations requested when filtering on query parameters (limited to 10000). Defaults to 10000 observations."
        type: integer
      links:
        $ref: '#/definitions/ObservationLinks'
      observations:
        description: "A list of observations found when filtering on query parameters"
        type: array
        items:
          properties:
            dimensions:
              description: "Contains a list of dimension objects associated with an observation. Each dimension combined with the top level list of dimensions result in this single observation only"
              type: object
              properties:
                <dimension name>:
                  description: "Each field is a dimension (<dimension name>) and will represent a query parameter in the request as long as the query parameter is equal to a wildcard value (*)"
                  type: object
                  properties:
                    href:
                      description: "A link to the corresponding dimension code for the given `dimension_option`"
                      example: "http://localhost:8080/codelists/AB12CD34/codes/K02000001"
                      type: string
                    id:
                      description: "The id of the corresponding dimension code for the given `dimension_option`"
                      type: "string"
                    label:
                      description: "The label corresponding to the dimension code for the given `dimension_option`"
                      type: string
            metadata:
              description: "Metadata related to the observation found against version of a dataset"
              type: array
              items:
                type: object
                properties:
                  <key>:
                    description: "A single metadata key-value pair related to the observation found against version of a dataset, for example 'coefficients of variation' or 'data marking'"
                    type: string
            observation:
              description: "The observation value for the selection of query parameters (dimensions) chosen"
              type: string
          required: [observation]
      offset:
        description: "The offset into the entire list of observations found"
        type: integer
      total_observations:
        description: "The number of observations found"
        type: integer
      unit_of_measure:
        description: "The unit of measure for the dataset observations"
        type: string
      usage_notes:
        description: "A list of usage notes relating to the dataset"
        type: array
        items:
          $ref: '#/definitions/UsageNotes'
  Publisher:
    description: "The publisher of the dataset"
    type: object
    properties:
      name:
        description: "The name of the publisher"
        type: string
      type:
        description: "The type of publisher"
        type: string
      href:
        description: "A link to the publishers homepage"
        type: string
  State:
    description: |
      The state of the resource, can only be one of the following:
        * created
        * completed (instances only)
        * failed (instances only)
        * edition-confirmed (instances and versions only)
        * associated (not editions)
        * published
    type: string
  Temporal:
    description: "A list of frequencies the dataset covers for a particular period of time"
    type: array
    items:
      type: object
      properties:
        start_date:
          description: "The start date of the time period in which the version of the dataset covers this frequency"
          type: string
        end_date:
          description: "The end date of the time period in which the version of the dataset covers this frequency"
          type: string
        frequency:
          description: "The time frequency the version of the dataset covers for the period of time between start_date and end_date"
          type: string
  UpdateDatasetResponse:
    description: "A model for the response body when creating a new dataset"
    type: object
    properties:
      id:
        description: "An unique id for a dataset"
        example: "DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC"
        type: string
      current:
        allOf:
        - type: object
          properties:
            collection_id:
              $ref: '#/definitions/CollectionID'
        - $ref: "#/definitions/Dataset"
      next:
        allOf:
        - type: object
          properties:
            collection_id:
              $ref: '#/definitions/CollectionID'
        - $ref: "#/definitions/Dataset"
  UpdateDimensionOptionRequest:
    description: "A cached dimension. (Only used by the Private API)"
    type: object
    properties:
      code:
        description: ""
        type: string
      codelist:
        description: ""
        type: string
      dimension:
        description: "The name of the dimension"
        type: string
      instance_id:
        description: "The unique identifier for the instance in which this dimension option is associated to"
        type: string
      label:
        description: "The label for a option"
        type: string
      option:
        description: "The option of the dimension"
        type: string
      order:
        description: "The numerical order for the dimension option"
        type: integer
  UpdateDownloadObject:
    description: "Object containing information of a downloadable file"
    type: object
    properties:
      href:
        description: "The URL to the generated file"
        type: string
      size:
        description: "The size of the file in bytes"
        type: string
      public:
        description: "The URL to a public-accessible download"
        type: string
      private:
        description: "The URL to a non public-accessible download"
        type: string
  UpdateInstanceDimension:
    description: "Possible fields to be updated against a dimension for an instance resource"
    type: object
    properties:
      description:
        description: "The dimension description"
        type: string
      label:
        description: "A human readable label for dimension"
        type: string
  UpdateVersion:
    description: "An object containing information to be updated on a version resource"
    type: object
    properties:
      alerts:
        description: "A list of alerts, for example corrections after the resource has been published"
        type: array
        items:
          $ref: '#/definitions/Alert'
      collection_id:
        $ref: '#/definitions/CollectionID'
      downloads:
        description: "A selection of download objects containing information of downloadable files. These can only be updated via an authorised caller."
        type: object
        properties:
          csv:
            $ref: '#/definitions/DownloadObject'
          xls:
            $ref: '#/definitions/DownloadObject'
      latest_changes:
        description: "A list of changes between version of an edition for a dataset and the previous version of the same dataset edition"
        type: array
        items:
          $ref: '#/definitions/LatestChange'
      links:
        $ref: '#/definitions/VersionLinks'
      release_date:
        description: "The release date of this version of the dataset"
        type: string
      state:
        $ref: '#/definitions/State'
      temporal:
        $ref: '#/definitions/Temporal'
      version:
        description: "A number identifying the version for an edition from a dataset"
        example: 1
        readOnly: true
        type: integer
      usage_notes:
        description: "A list of usage notes relating to the dataset"
        type: array
        items:
          $ref: '#/definitions/UsageNotes'
  UsageNotes:
    description: "A note relating to the dataset. This will appear in downloaded datasets"
    type: object
    properties:
      title:
        description: "The title of the note"
        type: string
      note:
        description: "The content of the note"
        type: string
  Versions:
    type: object
    properties:
      count:
        description: "The number of versions returned for an edition of a dataset"
        readOnly: true
        type: integer
      items:
        description: "An array of Datasets"
        type: array
        items:
          $ref: '#/definitions/Version'
      limit:
        description: "The number of versions requested for an edition of a dataset"
        type: integer
      offset:
        description: "The first row of versions for an edition of a dataset to retrieve, starting at 0. Use this parameter as a pagination mechanism along with the limit parameter"
        type: integer
      total_count:
        description: "The total number of versions for an edition of a dataset"
        readOnly: true
        type: integer
  Version:
    description: "An object containing information about published datasets from the ONS"
    required: [
      release_date,
    ]
    type: object
    properties:
      alerts:
        description: "A list of alerts, for example corrections after the resource has been published"
        type: array
        items:
          $ref: '#/definitions/Alert'
      collection_id:
        $ref: '#/definitions/CollectionID'
      dimensions:
        description: "A list of codelists for each dimension of this version"
        type: array
        items:
          $ref: '#/definitions/Codelist'
      downloads:
        description: "A selection of download objects containing information of downloadable files."
        type: object
        properties:
          csv:
            $ref: '#/definitions/DownloadObject'
          xls:
            $ref: '#/definitions/DownloadObject'
      edition:
        description: "The dataset edition for this version"
        readOnly: true
        type: string
      id:
        description: "The identifier for this version of an edition for a dataset"
        type: string
      dataset_id:
        description: "The identifier for the dataset."
        type: string
      latest_changes:
        description: "A list of changes between version of an edition for a dataset and the previous version of the same dataset edition"
        type: array
        items:
          $ref: '#/definitions/LatestChange'
      links:
        $ref: '#/definitions/VersionLinks'
      release_date:
        description: "The release date of this version of the dataset"
        type: string
      state:
        $ref: '#/definitions/State'
      temporal:
        $ref: '#/definitions/Temporal'
      version:
        description: "A number identifying the version for an edition from a dataset"
        example: 1
        readOnly: true
        type: integer
      usage_notes:
        description: "A list of usage notes relating to the dataset"
        type: array
        items:
          $ref: '#/definitions/UsageNotes'
  # Link objects
  DatasetLinks:
    description: "A list of links related to this resource"
    type: object
    properties:
      access_rights:
        $ref: '#/definitions/AccessRightsLink'
      editions:
        readOnly: true
        type: object
        properties:
          href:
            description: "A URL to all editions for this dataset"
            example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC/editions"
            type: string
      latest_version:
        $ref: '#/definitions/LatestVersionLink'
      self:
        $ref: '#/definitions/SelfLink'
      taxonomy:
        $ref: '#/definitions/TaxonomyLink'
  EditionLinks:
    description: "A list of links related to this resource"
    readOnly: true
    type: object
    properties:
      dataset:
        $ref: '#/definitions/DatasetLink'
      latest_version:
        $ref: '#/definitions/LatestVersionLink'
      self:
        $ref: '#/definitions/SelfLink'
      versions:
        type: object
        properties:
          href:
            description: "A URL to all versions dor an edition of a dataset"
            example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC/edition/2017/versions"
            type: string
  MetadataLinks:
    description: "A list of links related to this resource"
    readOnly: true
    type: object
    properties:
      access_right:
        $ref: '#/definitions/AccessRightsLink'
      self:
        $ref: '#/definitions/SelfLink'
      spatial:
        $ref: '#/definitions/SpatialLink'
      version:
        $ref: '#/definitions/VersionLink'
      website_version:
        description: "A link to the location of this version of the dataset on the web"
        type: object
        properties:
          href:
            description: "The uri to the location of this version of the dataset on the web"
            type: string
  ObservationLinks:
    description: "A list of links related to this resource"
    readOnly: true
    type: object
    properties:
      dataset_metadata:
        $ref: '#/definitions/MetadataLink'
      self:
        $ref: '#/definitions/SelfLink'
      version:
        $ref: '#/definitions/VersionLink'
  VersionLinks:
    description: "A list of links related to this resource"
    type: object
    properties:
      dataset:
        $ref: '#/definitions/DatasetLink'
      dimensions:
        readOnly: true
        type: object
        properties:
          href:
            description: "A URL to list dimensions for this version"
            example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC/editions/2017/versions/2/dimensions"
            type: string
      edition:
        $ref: '#/definitions/EditionLink'
      self:
        $ref: '#/definitions/SelfLink'
      spatial:
        $ref: '#/definitions/SpatialLink'
  DatasetLink:
    description: "An object containing the dataset id and link"
    readOnly: true
    type: object
    properties:
      href:
        description: "A URL to the parent dataset for this resource"
        example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC"
        type: string
      id:
        description: "The unique id for the dataset of this version"
        type: string
  EditionLink:
    description: "An object containing the edition and link"
    readOnly: true
    type: object
    properties:
      href:
        description: "A URL to the dataset edition for a version"
        example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC/editions/2017"
        type: string
      id:
        description: "The unique id for the dataset edition for a version"
        type: string
  LatestVersionLink:
    description: "An object containing the latest version id and link"
    type: object
    readOnly: true
    properties:
      href:
        description: "A link to the latest version and edition of the dataset"
        example: "http://localhost:8080/datasets/DE3BC0B6-D6C4-4E20-917E-95D7EA8C91DC/editions/2017/versions/2"
        type: string
      id:
        description: "The unique id for the latest version of a dataset"
        type: "string"
  MetadataLink:
    description: "The version metadata that is associated with this resource"
    type: object
    properties:
      href:
        description: "A URL for the version metadata this resource relates to"
        type: string
  OptionsLink:
    description: "A list of links related to this dimension"
    type: object
    properties:
      href:
        description: "A URL to a list of options for this dimension"
        type: string
  SelfLink:
    description: "A link to this resource"
    readOnly: true
    type: object
    properties:
      href:
        description: "A URL to this resource"
        type: string
  SpatialLink:
    type: object
    properties:
      href:
        description: "A url to a list of geography ranges for the version of the dataset"
        type: string
  TaxonomyLink:
    description: "A link to the taxonomy of the dataset"
    type: object
    properties:
      href:
        description: "A url to the taxonomy of the dataset"
        type: string
  VersionLink:
    description: "The dataset version this resource belongs to"
    type: object
    properties:
      href:
        description: "A URL to the version this resource relates to"
        type: string
      id:
        description: "The version number this resource relates to"
        type: string
